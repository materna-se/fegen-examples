# FeGen gradle example

This project demonstrates how FeGen can be used to generate Typescript and Kotlin projects that simplify the usage of the REST API provided by a Spring Data application.


## Project structure

The `backend` sub project contains a Spring application that provides a REST API.
Its data model resembles an address book service and consists of `User`s which have may have any number of `Contact`s that in turn may have a single `Adress`.

The two projects `kotlin-api` and `web-api` contain code generated by FeGen to access the APIs provided by the Spring application in a type safe manner from Kotlin and Typescript respectively.
They also contain functional tests for the generated code.

The `web-frontend` directory contains a React application that uses the `web-api` package as a dependency to communicate with the `backend`. 

The Spring application is configured to serve REST endpoints behind the sub url `/api`. This is done by an entry in the `application.properties` file.
 This is reflected by the `model/apiClient.ts` file that holds the `ApiClient` instance that is used in the frontend to communicate with the server.
 When creating the instance, `api` is passed as `baseUrl`.
 
## Running the example

To try out the example project, you need to build the Typescript API project that contains code generated by FeGen:

```shell script
cd web-api
npm install
npm run build
```

To make API calls work you also need to start the Spring application in `backend` by running the following command:

```shell script
gradle bootRun
```

Then you can install the dependencies of the frontend project and start the React development server from the `web-frontend` directory:

```shell script
cd web-frontend
npm install
npm start
```

Changes in the frontend code will be picked up by the development server and should directly be visible.

If you change the structure of the backend code, you will need to rerun FeGen so the changes will be reflected in the API projects.

```
gradle fegenKotlin fegenWeb
```

## Frontend

The frontend project uses Typescript, React, and Mobx. It was created using `npx create-react-app web-frontend --template typescript`.
It contains several components inside the corresponding subdirectory of `src` that each demonstrate certain features of fegen.
Each component uses a matching model that utilizes Mobx for state handling.
The `mainModel` holds data that is relevant to multiple components.

If you want to see an example for the usage of a certain FeGen feature, you should look at the model classes of the example application.

| FeGen features | Frontend model class |
| --- | --- |
| Create and read | `userModel` |
| Get entities associated with another entity | `userContactsModel` |
| Reading specific projections and deleting entities | `contactDetailsModel` |
| Custom endpoints | `upsertContactModel` |
| Repository searches | `contactSearchModel` |
| Custom searches | `regexSearchModel` |
